<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Paiement — Elysian Unity</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#ffffff;--text:#0a0a0a;--muted:#667;--accent:#0a0a0a;--card:#f8f8f8}
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
        .container{max-width:980px;margin:4rem auto;padding:2rem}
        header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}
        .logo{font-weight:600;letter-spacing:3px}
        a.link{color:var(--accent);text-decoration:none;font-weight:500}

        .grid{display:grid;grid-template-columns:1fr 420px;gap:2.5rem}
        @media (max-width:900px){.grid{grid-template-columns:1fr}}

        .card{background:var(--card);padding:2rem;border-radius:10px;box-shadow:0 6px 30px rgba(10,10,10,0.04)}
        h1{font-weight:300;margin-bottom:0.5rem}
        p.lead{color:var(--muted);margin-bottom:1.2rem}

        form .field{margin-bottom:1rem}
        label{display:block;font-size:0.85rem;margin-bottom:0.4rem;color:var(--muted)}
        input[type=text],input[type=email],select,textarea{width:100%;padding:0.9rem;border:1px solid #e6e6e6;border-radius:8px;background:white}
        .row{display:flex;gap:1rem}
        .row .col{flex:1}

        .summary{background:linear-gradient(180deg,#fff,#fbfbfb);padding:1.2rem;border-radius:8px}
        .product{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}
        .product img{width:64px;height:64px;object-fit:cover;border-radius:6px}
        .muted{color:var(--muted);font-size:0.9rem}

        .btn{display:inline-block;padding:0.9rem 1.2rem;border-radius:8px;border:2px solid var(--accent);background:var(--accent);color:white;font-weight:600;cursor:pointer}
        .btn.secondary{background:white;color:var(--accent);border-color:#e6e6e6}

        .note{font-size:0.9rem;color:var(--muted);margin-top:0.6rem}

        /* success overlay */
        .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:1200}
        .overlay .modal{background:white;padding:2rem;border-radius:10px;max-width:520px;width:100%;text-align:center}
        .overlay.show{display:flex}

        /* small helper */
        .error{border-color:#d9534f}
        .error-text{color:#d9534f;font-size:0.85rem;margin-top:0.35rem}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">ELYSIAN UNITY</div>
            <nav>
                <a class="link" href="./index.html">← Retour</a>
            </nav>
        </header>

        <div class="grid">
            <main>
                <div class="card">
                    <h1>Paiement</h1>
                    <p class="lead">Complète tes informations de livraison et de paiement. Ceci est une simulation front-end — aucune carte n'est réellement débitée.</p>

                    <form id="paymentForm" novalidate>
                        <div class="field">
                            <label for="fullName">Nom complet</label>
                            <input id="fullName" name="fullName" type="text" placeholder="Prénom Nom" required>
                            <div class="error-text" id="err-fullName" style="display:none"></div>
                        </div>

                        <div class="row">
                            <div class="col field">
                                <label for="email">Email</label>
                                <input id="email" name="email" type="email" placeholder="exemple@mail.com" required>
                                <div class="error-text" id="err-email" style="display:none"></div>
                            </div>
                            <div class="col field">
                                <label for="phone">Téléphone</label>
                                <input id="phone" name="phone" type="text" placeholder="06 12 34 56 78">
                            </div>
                        </div>

                        <div class="field">
                            <label for="address">Adresse de livraison</label>
                            <textarea id="address" name="address" rows="3" placeholder="Adresse, code postal, ville" required></textarea>
                            <div class="error-text" id="err-address" style="display:none"></div>
                        </div>

                        <hr style="margin:1rem 0 1.2rem;border:none;border-top:1px solid #eee">

                        <div class="field">
                            <label for="product">Produit</label>
                            <select id="product" name="product">
                                <option value="charcoal">Charcoal Edition — 45€</option>
                                <option value="signature">Signature Edition — 55€</option>
                                <option value="collector">Collector Edition — 120€</option>
                            </select>
                        </div>

                        <div class="row">
                            <div class="col field">
                                <label for="size">Taille</label>
                                <select id="size" name="size">
                                    <option>S</option>
                                    <option>M</option>
                                    <option>L</option>
                                    <option>XL</option>
                                </select>
                            </div>
                            <div class="col field">
                                <label for="qty">Quantité</label>
                                <input id="qty" name="qty" type="text" inputmode="numeric" value="1">
                            </div>
                        </div>

                        <hr style="margin:1rem 0 1.2rem;border:none;border-top:1px solid #eee">

                        <h3 style="font-weight:500;margin-bottom:0.6rem">Informations de carte</h3>
                        <p class="muted" style="margin-bottom:0.8rem">Entrer des valeurs factices pour simuler (ex: 4242 4242 4242 4242).</p>

                        <div class="field">
                            <label for="cardNumber">Numéro de carte</label>
                            <input id="cardNumber" name="cardNumber" type="text" placeholder="4242 4242 4242 4242" required>
                            <div class="error-text" id="err-cardNumber" style="display:none"></div>
                        </div>

                        <div class="row">
                            <div class="col field">
                                <label for="exp">Expiration (MM/AA)</label>
                                <input id="exp" name="exp" type="text" placeholder="08/28" required>
                            </div>
                            <div class="col field">
                                <label for="cvc">CVC</label>
                                <input id="cvc" name="cvc" type="text" inputmode="numeric" placeholder="123" required>
                            </div>
                        </div>

                        <div style="display:flex;gap:1rem;align-items:center;margin-top:1.2rem">
                            <button type="submit" id="payBtn" class="btn">PAYER</button>
                            <button type="button" id="clearBtn" class="btn secondary">EFFACER</button>
                        </div>

                        <p class="note">En cliquant sur « PAYER », vous simulez le processus de paiement pour la démo.</p>
                    </form>
                </div>
            </main>

            <aside>
                <div class="card">
                    <h3>Récapitulatif</h3>
                    <div class="summary" id="summaryBox">
                        <div class="product">
                            <img src="/public/Charcoal Edition - Elysian Unity.png" alt="produit">
                            <div>
                                <div style="font-weight:600">Charcoal Edition</div>
                                <div class="muted">Taille M • Quantité 1</div>
                            </div>
                        </div>

                        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:1rem">
                            <div class="muted">Sous-total</div>
                            <div id="subTotal">45€</div>
                        </div>
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:0.6rem">
                            <div class="muted">Livraison</div>
                            <div id="shipping">4€</div>
                        </div>
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:0.8rem;font-weight:600;font-size:1.15rem">
                            <div>Total</div>
                            <div id="total">49€</div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <div class="overlay" id="overlay">
        <div class="modal">
            <h2>Merci !</h2>
            <p class="muted" id="orderSummary">Votre commande a bien été simulée.</p>
            <div style="margin-top:1.2rem">
                <a id="backToHome" class="btn" href="./index.html">Retour à l'accueil</a>
            </div>
        </div>
    </div>

    <script>
        // Basic front-end form handling + simulation
        const form = document.getElementById('paymentForm');
        const payBtn = document.getElementById('payBtn');
        const clearBtn = document.getElementById('clearBtn');
        const overlay = document.getElementById('overlay');
        const summaryBox = document.getElementById('summaryBox');

        function setError(id, message){
            const el = document.getElementById(id);
            if(!el) return;
            el.style.display = message ? 'block' : 'none';
            el.textContent = message || '';
            const input = el.previousElementSibling;
            if(input) {
                if(message) input.classList.add('error'); else input.classList.remove('error');
            }
        }

        function calcTotals(){
            const product = document.getElementById('product').value;
            const qty = parseInt(document.getElementById('qty').value) || 1;
            let price = 45;
            if(product === 'signature') price = 55;
            if(product === 'collector') price = 120;
            const sub = price * qty;
            const shipping = sub > 100 ? 0 : 4;
            const total = sub + shipping;
            document.getElementById('subTotal').textContent = sub + '€';
            document.getElementById('shipping').textContent = shipping + '€';
            document.getElementById('total').textContent = total + '€';
        }

        // Update summary when product/qty change
        document.getElementById('product').addEventListener('change',calcTotals);
        document.getElementById('qty').addEventListener('input',calcTotals);

        clearBtn.addEventListener('click', ()=>{
            form.reset();
            setError('err-fullName','');setError('err-email','');setError('err-address','');setError('err-cardNumber','');
            calcTotals();
        });

        form.addEventListener('submit', (e)=>{
            e.preventDefault();
            // simple validation
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const address = document.getElementById('address').value.trim();
            const cardNumber = document.getElementById('cardNumber').value.replace(/\s+/g,'');

            let ok = true;
            if(fullName.length < 3){ setError('err-fullName','Veuillez renseigner votre nom complet'); ok=false;} else setError('err-fullName','');
            if(!/^\S+@\S+\.\S+$/.test(email)){ setError('err-email','Adresse email invalide'); ok=false;} else setError('err-email','');
            if(address.length < 6){ setError('err-address','Adresse trop courte'); ok=false;} else setError('err-address','');
            if(!/^\d{12,19}$/.test(cardNumber)){ setError('err-cardNumber','Numéro de carte invalide (utilisez des chiffres)'); ok=false;} else setError('err-cardNumber','');

            if(!ok) return;

            // simulate payment processing
            payBtn.disabled = true; payBtn.textContent = 'Traitement...';
            setTimeout(()=>{
                // success
                overlay.classList.add('show');
                const productLabel = document.getElementById('product').selectedOptions[0].textContent;
                const qty = document.getElementById('qty').value;
                document.getElementById('orderSummary').textContent = `${productLabel} • Quantité ${qty} — Paiement simulé avec succès.`;
                payBtn.disabled = false; payBtn.textContent = 'PAYER';
            }, 1100);
        });

        // init
        calcTotals();
    </script>
</body>
</html>
